<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-lang/rust/数据类型/泛型" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">泛型 | Panovista</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wangenius.github.io/en/docs/lang/rust/数据类型/泛型"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="泛型 | Panovista"><meta data-rh="true" name="description" content="泛型是将类型和功能概括到更广泛的情况的主题。这对于以多种方式减少代码重复非常有用，但可能需要相当复杂的语法。也就是说，泛型需要非常小心地指定泛型类型实际上被认为是有效的类型。泛型最简单且最常见的用途是用于类型参数。"><meta data-rh="true" property="og:description" content="泛型是将类型和功能概括到更广泛的情况的主题。这对于以多种方式减少代码重复非常有用，但可能需要相当复杂的语法。也就是说，泛型需要非常小心地指定泛型类型实际上被认为是有效的类型。泛型最简单且最常见的用途是用于类型参数。"><link data-rh="true" rel="icon" href="/en/img/panovista.svg"><link data-rh="true" rel="canonical" href="https://wangenius.github.io/en/docs/lang/rust/数据类型/泛型"><link data-rh="true" rel="alternate" href="https://wangenius.github.io/en/docs/lang/rust/数据类型/泛型" hreflang="en"><link data-rh="true" rel="alternate" href="https://wangenius.github.io/docs/lang/rust/数据类型/泛型" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://wangenius.github.io/docs/lang/rust/数据类型/泛型" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Panovista RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Panovista Atom Feed">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/styles.4d7c84ed.css">
<script src="/en/assets/js/runtime~main.7e713153.js" defer="defer"></script>
<script src="/en/assets/js/main.1a21d7c8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/panovista.png" alt="logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/panovista.png" alt="logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">panovista</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">DSA</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/dsa/ds/概述">算法和数据结构</a></li><li><a class="dropdown__link" href="/en/docs/dsa/leetcode/概述">leetcode刷题</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">计算机原理</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/cs/co/概述">组成原理</a></li><li><a class="dropdown__link" href="/en/docs/cs/db/SQL">数据库</a></li><li><a class="dropdown__link" href="/en/docs/cs/os/概述">操作系统</a></li><li><a class="dropdown__link" href="/en/docs/cs/web/概述">计算机网络</a></li><li><a class="dropdown__link" href="/en/docs/more/git/安装和设置">Git</a></li><li><a class="dropdown__link" href="/en/docs/cs/se/概述">软件工程</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">AI</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/ai/ml/概述">机器学习</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">语言</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/lang/cpp/简介">C++</a></li><li><a class="dropdown__link" href="/en/docs/lang/python/概述">Python</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/lang/rust/概述">Rust</a></li><li><a class="dropdown__link" href="/en/docs/lang/ts/CSS">TypeScript</a></li><li><a class="dropdown__link" href="/en/docs/lang/compile/概述">编译原理</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">更多</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/more/math/space">数学</a></li><li><a class="dropdown__link" href="/en/docs/more/tools/scoop">工具和工作流</a></li></ul></div><a class="navbar__item navbar__link" href="/en/docs/opus/overview">作品集</a><a class="navbar__item navbar__link" href="/en/blog">博客</a><a class="navbar__item navbar__link" href="/en/docs/about/关于我">关于</a><a href="https://github.com/wangenius/wangenius.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/en/"><img src="/en/img/panovista.png" alt="logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/panovista.png" alt="logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>panovista</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/lang/rust/概述">概述</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">模块系统</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/模块和编译/crate">crate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/模块和编译/宏">宏</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/模块和编译/属性">属性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/模块和编译/模块系统">模块系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/模块和编译/Cargo">Cargo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/模块和编译/std">std</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/模块和编译/编译">编译</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">变量和声明</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/变量和声明/变量和常量">变量和常量</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/变量和声明/声明">声明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/变量和声明/作用域">作用域</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/变量和声明/所有权">所有权</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">数据类型</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/数据类型/基本数据类型">基本数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/数据类型/复合类型">复合类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/lang/rust/数据类型/泛型">泛型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/数据类型/自定义类型">自定义类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/数据类型/哈希">哈希</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/数据类型/智能指针">智能指针</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">表达式和函数</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/表达式和函数/函数">函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/表达式和函数/控制流语句">控制流语句</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/表达式和函数/运算符">运算符</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">面向对象</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/面向对象/OOP">方法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/面向对象/类">类</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/面向对象/设计模式">设计模式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/面向对象/错误处理">panic!</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">std misc</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/std misc/IO">IO</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">多线程</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/多线程/并发">并发</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/en/docs/lang/rust/测试">测试</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/测试/测试的组织结构">测试的组织结构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/测试/运行测试">运行测试</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">特征</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/特征/traits">traits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/特征/迭代器">迭代器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/特征/impl trait">impl trait</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/特征/clone">clone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/特征/注解">注解</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">错误处理</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/错误处理/panic">panic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/错误处理/abort&amp;unwind">abort&amp;unwind</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/错误处理/option&amp;unwrap">option&amp;unwrap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/错误处理/Result">Result</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/错误处理/多种错误类型">多种错误类型</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">项目学习</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/项目学习/简介">简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/项目学习/Axum">Axum</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/项目学习/Tokio">Tokio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/项目学习/deno">deno</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/项目学习/sled">sled</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/项目学习/swc">swc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/rust/项目学习/tauri">tauri</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">数据类型</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">泛型</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>泛型</h1>
<p>泛型是将类型和功能概括到更广泛的情况的主题。这对于以多种方式减少代码重复非常有用，但可能需要相当复杂的语法。也就是说，泛型需要非常小心地指定泛型类型实际上被认为是有效的类型。泛型最简单且最常见的用途是用于类型参数。</p>
<p>通过使用尖括号和大驼峰式大小写将类型参数指定为泛型： <code>&lt;Aaa, Bbb, ...&gt;</code> 。 “通用类型参数”通常表示为 <code>&lt;T&gt;</code> 。在 Rust 中，“泛型”还描述了任何接受一个或多个泛型类型参数 <code>&lt;T&gt;</code> 的事物。指定为泛型类型参数的任何类型都是泛型，其他所有类型都是具体的（非泛型）。</p>
<p>例如，定义一个名为 foo 的泛型函​​数，它接受任何类型的参数 T ：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">foo</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>由于 T 已使用 <code>&lt;T&gt;</code> 指定为泛型类型参数，因此在此处用作 (arg: T) 时，它被视为泛型。即使 T 之前已被定义为 struct ，情况也是如此。</p>
<p>此示例显示了一些实际语法：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#8C8C8C;font-style:italic">// A concrete type `A`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// In defining the type `Single`, the first use of `A` is not preceded by `&lt;A&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Therefore, `Single` is a concrete type, and `A` is defined as above.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Single</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">//            ^ Here is `Single`s first use of the type `A`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Here, `&lt;T&gt;` precedes the first use of `T`, so `SingleGen` is a generic type.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Because the type parameter `T` is generic, it could be anything, including</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// the concrete type `A` defined at the top.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">SingleGen</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `Single` is concrete and explicitly takes `A`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _s </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Single</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Create a variable `_char` of type `SingleGen&lt;char&gt;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// and give it the value `SingleGen(&#x27;a&#x27;)`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Here, `SingleGen` has a type parameter explicitly specified.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _char</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SingleGen</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">char</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SingleGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `SingleGen` can also have a type parameter implicitly specified:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _t    </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SingleGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Uses `A` defined at the top.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _i32  </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SingleGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#1750EB">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Uses `i32`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _char </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SingleGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Uses `char`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">add</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">:</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">:</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a</span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain">b  </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// 编译会报错，因为不是所有的类型都能相加，需要使用trait对T进行限制,我们称之为特征约束</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Point</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// struct中使用泛型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Point</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// 给泛型struct添加method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">U</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Point</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name" style="color:#008080">Point</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> res </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token function" style="color:#00627A">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#1750EB">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#1750EB">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// 对a赋值时，T就被确定为整数类型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token macro property" style="color:#1750EB">print!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;a+b={}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>性能</h1>
<p>Rust 是在编译期为泛型对应的多个类型，生成各自的代码，(相当于编译器帮你写了多份代码)，因此损失了编译速度和增大了最终生成文件的大小，但是对性能不影响。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="函数">函数<a href="#函数" class="hash-link" aria-label="Direct link to 函数" title="Direct link to 函数">​</a></h2>
<p>相同的规则集可以应用于函数：类型 T 当前面有 <code>&lt;T&gt;</code>时变得通用。</p>
<p>使用泛型函数有时需要显式指定类型参数。如果在返回类型为泛型的情况下调用函数，或者编译器没有足够的信息来推断必要的类型参数，则可能会出现这种情况。</p>
<p>具有显式指定类型参数的函数调用如下所示： <code>fun::&lt;A, B, ...&gt;()</code> 。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">          </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Concrete type `A`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">S</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Concrete type `S`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">SGen</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Generic type `SGen`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// The following functions all take ownership of the variable passed into</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// them and immediately go out of scope, freeing the variable.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Define a function `reg_fn` that takes an argument `_s` of type `S`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// This has no `&lt;T&gt;` so this is not a generic function.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">reg_fn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_s</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Define a function `gen_spec_t` that takes an argument `_s` of type `SGen&lt;T&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// It has been explicitly given the type parameter `A`, but because `A` has not</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// been specified as a generic type parameter for `gen_spec_t`, it is not generic.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">gen_spec_t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_s</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SGen</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Define a function `gen_spec_i32` that takes an argument `_s` of type `SGen&lt;i32&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// It has been explicitly given the type parameter `i32`, which is a specific type.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Because `i32` is not a generic type, this function is also not generic.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">gen_spec_i32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_s</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SGen</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Define a function `generic` that takes an argument `_s` of type `SGen&lt;T&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Because `SGen&lt;T&gt;` is preceded by `&lt;T&gt;`, this function is generic over `T`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">generic</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_s</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">SGen</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Using the non-generic functions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">reg_fn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">S</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">          </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Concrete type.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">gen_spec_t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">SGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Implicitly specified type parameter `A`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">gen_spec_i32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">SGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#1750EB">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Implicitly specified type parameter `i32`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Explicitly specified type parameter `char` to `generic()`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">generic</span><span class="token punctuation" style="color:#393A34">::</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">char</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">SGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Implicitly specified type parameter `char` to `generic()`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">generic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">SGen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;c&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="implementation">implementation<a href="#implementation" class="hash-link" aria-label="Direct link to implementation" title="Direct link to implementation">​</a></h2>
<p>与函数类似，实现需要注意保持通用性。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">S</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Concrete type `S`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">GenericVal</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Generic type `GenericVal`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// impl of GenericVal where we explicitly specify type parameters:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">GenericVal</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">f32</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Specify `f32`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">GenericVal</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">S</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Specify `S` as defined above</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `&lt;T&gt;` Must precede the type to remain generic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">GenericVal</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Val</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">GenVal</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gen_val</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// impl of Val</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Val</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">f64</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">val</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// impl of GenVal for a generic type `T`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">GenVal</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">T</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gen_val</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Val</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3.0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">GenVal</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> gen_val</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3i32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;{}, {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="trait">trait<a href="#trait" class="hash-link" aria-label="Direct link to trait" title="Direct link to trait">​</a></h2>
<p>当然 trait 也可以是通用的。这里我们定义一个将 Drop trait 重新实现为 drop 本身和输入的通用方法。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#8C8C8C;font-style:italic">// Non-copyable types.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Empty</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// A trait generic over `T`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">DoubleDrop</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Define a method on the caller type which takes an</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// additional single parameter `T` and does nothing with it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">double_drop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Implement `DoubleDrop&lt;T&gt;` for any generic parameter `T` and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// caller `U`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">DoubleDrop</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">U</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// This method takes ownership of both passed arguments,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// deallocating both.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">double_drop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> empty </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Empty</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> null  </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Deallocate `empty` and `null`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    empty</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">double_drop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//empty;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//null;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// ^ TODO: Try uncommenting these lines.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bounds">bounds<a href="#bounds" class="hash-link" aria-label="Direct link to bounds" title="Direct link to bounds">​</a></h2>
<p>使用泛型时，类型参数通常必须使用特征作为边界来规定类型实现的功能。例如，以下示例使用特征 Display 进行打印，因此它需要 T 与 Display 绑定；也就是说， T 必须实现 Display 。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#8C8C8C;font-style:italic">// Define a function `printer` that takes a generic type `T` which</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// must implement trait `Display`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">printer</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Display</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;{}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>边界将泛型限制为符合边界的类型。那是：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">S</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Display</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Error! `Vec&lt;T&gt;` does not implement `Display`. This</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// specialization will fail.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> s </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">S</span><span class="token punctuation" style="color:#393A34">(</span><span class="token macro property" style="color:#1750EB">vec!</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#1750EB">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>边界的另一个作用是允许泛型实例访问边界中指定的特征的方法。例如：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#8C8C8C;font-style:italic">// A trait which implements the print marker: `{:?}`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">std</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">fmt</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token class-name" style="color:#008080">Debug</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">HasArea</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">area</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">HasArea</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Rectangle</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">area</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length </span><span class="token operator" style="color:rgb(216, 60, 8)">*</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#0550AE">#[derive(Debug)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Rectangle</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#0550AE">#[allow(dead_code)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Triangle</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// The generic `T` must implement `Debug`. Regardless</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// of the type, this will work properly.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">print_debug</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Debug</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;{:?}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `T` must implement `HasArea`. Any type which meets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// the bound can access `HasArea`&#x27;s function `area`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">area</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">HasArea</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">area</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> rectangle </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Rectangle</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">4.0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _triangle </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Triangle</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">4.0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">print_debug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">rectangle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Area: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#00627A">area</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">rectangle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//print_debug(&amp;_triangle);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//println!(&quot;Area: {}&quot;, area(&amp;_triangle));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// ^ TODO: Try uncommenting these.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// | Error: Does not implement either `Debug` or `HasArea`. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>作为补充说明，在某些情况下， where 子句也可用于应用边界，以更具表现力。</p>
<p>边界工作方式的结果是，即使 trait 不包含任何功能，您仍  然可以将其用作边界。 Eq 和 Copy 是 std 库中此类 trait 的示例。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Cardinal</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">BlueJay</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Turkey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Red</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Blue</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Red</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Cardinal</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Blue</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">BlueJay</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// These functions are only valid for types which implement these</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// traits. The fact that the traits are empty is irrelevant.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">red</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Red</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token lifetime-annotation symbol" style="color:#36acaa">&#x27;static</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">str</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string" style="color:#067D17">&quot;red&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">blue</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Blue</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token lifetime-annotation symbol" style="color:#36acaa">&#x27;static</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">str</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string" style="color:#067D17">&quot;blue&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> cardinal </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Cardinal</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> blue_jay </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">BlueJay</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _turkey   </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Turkey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `red()` won&#x27;t work on a blue jay nor vice versa</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// because of the bounds.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;A cardinal is {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#00627A">red</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">cardinal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;A blue jay is {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#00627A">blue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">blue_jay</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//println!(&quot;A turkey is {}&quot;, red(&amp;_turkey));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// ^ TODO: Try uncommenting this line.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="multibounds">MultiBounds<a href="#multibounds" class="hash-link" aria-label="Direct link to MultiBounds" title="Direct link to MultiBounds">​</a></h2>
<p>边界工作方式的结果是，即使 trait 不包含任何功能，您仍然可以将其用作边界。 Eq 和 Copy 是 std 库中此类 trait 的示例。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">std</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">fmt</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token punctuation" style="color:#393A34">{</span><span class="token class-name" style="color:#008080">Debug</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Display</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">compare_prints</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Debug</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Display</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Debug: `{:?}`&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Display: `{}`&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">compare_types</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Debug</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">U</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Debug</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> u</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">U</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;t: `{:?}`&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;u: `{:?}`&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> u</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> string </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token string" style="color:#067D17">&quot;words&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> array </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#1750EB">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> vec </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token macro property" style="color:#1750EB">vec!</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#1750EB">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">compare_prints</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//compare_prints(&amp;array);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// TODO ^ Try uncommenting this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#00627A">compare_types</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">vec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="where子句">where子句<a href="#where子句" class="hash-link" aria-label="Direct link to where子句" title="Direct link to where子句">​</a></h2>
<p>边界也可以在开始 <code>{</code> 之前使用 where 子句来表达，而不是在类型第一次提及时。此外， where 子句可以将边界应用于任意类型，而不仅仅是类型参数。</p>
<p>在某些情况下 where 子句很有用：</p>
<p>当单独指定泛型类型和界限时会更清晰：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitB</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">D</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitF</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">MyTrait</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">D</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">YourType</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Expressing bounds with a `where` clause</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">D</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">MyTrait</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">D</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">YourType</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">where</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitB</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name" style="color:#008080">D</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">TraitF</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用 where 子句比使用普通语法更具表现力。此示例中的 impl 不能在没有 where 子句的情况下直接表达：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">std</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">fmt</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token class-name" style="color:#008080">Debug</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">PrintInOption</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">print_in_option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Because we would otherwise have to express this as `T: Debug` or </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// use another method of indirect approach, this requires a `where` clause:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PrintInOption</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">where</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name" style="color:#008080">Option</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Debug</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// We want `Option&lt;T&gt;: Debug` as our bound because that is what&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// being printed. Doing otherwise would be using the wrong bound.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">print_in_option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;{:?}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Some</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> vec </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token macro property" style="color:#1750EB">vec!</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#1750EB">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">print_in_option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="new-type-idiom">New type idiom<a href="#new-type-idiom" class="hash-link" aria-label="Direct link to New type idiom" title="Direct link to New type idiom">​</a></h2>
<p>newtype 习惯用法在编译时保证向程序提供正确类型的值。</p>
<p>例如，检查年龄的年龄验证函数必须指定 Years 类型的值。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">i64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Days</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">i64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Years</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">to_days</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Days</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name" style="color:#008080">Days</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">*</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">365</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Days</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">/// truncates partial years</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">to_years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Years</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name" style="color:#008080">Years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">/</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">365</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">old_enough</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">Years</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token number" style="color:#1750EB">.0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> age </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#1750EB">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> age_days </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> age</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">to_days</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Old enough {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#00627A">old_enough</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">age</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Old enough {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#00627A">old_enough</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">age_days</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">to_years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// println!(&quot;Old enough {}&quot;, old_enough(&amp;age_days));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>取消注释最后一个打印语句以观察提供的类型必须是 Years 。</p>
<p>要获取 newtype 的值作为基本类型，您可以使用元组或解构语法，如下所示：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">i64</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> years </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#1750EB">42</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> years_as_primitive_1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i64</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> years</span><span class="token number" style="color:#1750EB">.0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Tuple</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Years</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">years_as_primitive_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> years</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Destructuring</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="associated-items">Associated items<a href="#associated-items" class="hash-link" aria-label="Direct link to Associated items" title="Direct link to Associated items">​</a></h2>
<p>“关联项”是指与各种类型的 item 有关的一组规则。它是 trait 泛型的扩展，并允许 trait 在内部定义新项目。</p>
<p>其中一项称为关联类型，当 trait 对其容器类型通用时，它提供更简单的使用模式。</p>
<p>对其容器类型通用的 trait 具有类型规范要求 - trait 的用户必须指定其所有通用类型。</p>
<p>在下面的示例中， Contains trait 允许使用泛型类型 A 和 B 。然后为 Container 类型实现该特征，为 A 和 B 指定 i32 ，以便它可以与 fn difference() 。</p>
<p>由于 Contains 是通用的，因此我们被迫显式声明 fn difference() 的所有通用类型。在实践中，我们想要一种方式来表达 A 和 B 由输入 C 确定。正如您将在下一节中看到的，关联类型恰恰提供了该功能。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Container</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// A trait which checks if 2 items are stored inside of container.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Also retrieves first or last value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Contains</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">B</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">B</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">bool</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Explicitly requires `A` and `B`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Doesn&#x27;t explicitly require `A` or `B`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Doesn&#x27;t explicitly require `A` or `B`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Contains</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Container</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// True if the numbers stored are equal.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number_1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number_2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">==</span><span class="token plain"> number_1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">==</span><span class="token plain"> number_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Grab the first number.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Grab the last number.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `C` contains `A` and `B`. In light of that, having to express `A` and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `B` again is a nuisance.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">difference</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">C</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">where</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Contains</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">B</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">-</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> number_1 </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> number_2 </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> container </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Container</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">number_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Does container contain {} and {}: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;First number: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Last number: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;The difference is: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#00627A">difference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="关联类型">关 联类型<a href="#关联类型" class="hash-link" aria-label="Direct link to 关联类型" title="Direct link to 关联类型">​</a></h3>
<p>“关联类型”的使用通过将内部类型本地移动到特征中作为输出类型来提高代码的整体可读性。 trait 定义的语法如下：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#8C8C8C;font-style:italic">// `A` and `B` are defined in the trait via the `type` keyword.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// (Note: `type` in this context is different from `type` when used for</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// aliases).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Contains</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">B</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Updated syntax to refer to these new types generically.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">Self</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">Self</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#008080">B</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">bool</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>请注意，使用 trait Contains 的函数不再需要表达 A 或 B ：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#8C8C8C;font-style:italic">// Without using associated types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">difference</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">C</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">where</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Contains</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">B</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Using associated types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">difference</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Contains</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>让我们使用关联类型重写上一节中的示例：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Container</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// A trait which checks if 2 items are stored inside of container.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Also retrieves first or last value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Contains</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Define generic types here which methods will be able to utilize.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">B</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">Self</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">Self</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#008080">B</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">bool</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Contains</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Container</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Specify what types `A` and `B` are. If the `input` type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// is `Container(i32, i32)`, the `output` types are determined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// as `i32` and `i32`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">A</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">B</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `&amp;Self::A` and `&amp;Self::B` are also valid here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number_1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number_2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">i32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">==</span><span class="token plain"> number_1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">==</span><span class="token plain"> number_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Grab the first number.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Grab the last number.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">difference</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Contains</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token class-name" style="color:#008080">C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">i32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">-</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> number_1 </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> number_2 </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token number" style="color:#1750EB">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> container </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Container</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">number_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Does container contain {} and {}: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">number_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;First number: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">first</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;Last number: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#00627A">last</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;The difference is: {}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#00627A">difference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:rgb(216, 60, 8)">&amp;</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="幻想类型参数">幻想类型参数<a href="#幻想类型参数" class="hash-link" aria-label="Direct link to 幻想类型参数" title="Direct link to 幻想类型参数">​</a></h2>
<p>幻像类型参数是一种在运行时不显示的参数，但在编译时（且仅）静态检查。</p>
<p>数据类型可以使用额外的泛型类型参数来充当标记或在编译时执行类型检查。这些额外参数不保存存储值，并且没有运行时行为。</p>
<p>在下面的示例中，我们将 std::marker::PhantomData 与幻像类型参数概念结合起来，创建包含不同数据类型的元组。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">std</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">marker</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// A phantom tuple struct which is generic over `A` with hidden parameter `B`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#0550AE">#[derive(PartialEq)]</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Allow equality test for this type.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">PhantomTuple</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">B</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">B</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// A phantom type struct which is generic over `A` with hidden parameter `B`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#0550AE">#[derive(PartialEq)]</span><span class="token plain"> </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Allow equality test for this type.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">PhantomStruct</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">B</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> phantom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">B</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Note: Storage is allocated for generic type `A`, but not for `B`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">//       Therefore, `B` cannot be used in computations.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Here, `f32` and `f64` are the hidden parameters.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// PhantomTuple type specified as `&lt;char, f32&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _tuple1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomTuple</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">char</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f32</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomTuple</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;Q&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// PhantomTuple type specified as `&lt;char, f64&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _tuple2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomTuple</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">char</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomTuple</span><span class="token punctuation" style="color:#393A34">(</span><span class="token char">&#x27;Q&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Type specified as `&lt;char, f32&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _struct1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomStruct</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">char</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f32</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomStruct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token char">&#x27;Q&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        phantom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Type specified as `&lt;char, f64&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> _struct2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomStruct</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token keyword" style="color:#0033B3">char</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">f64</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomStruct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token char">&#x27;Q&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        phantom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Compile-time Error! Type mismatch so these cannot be compared:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// println!(&quot;_tuple1 == _tuple2 yields: {}&quot;,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//           _tuple1 == _tuple2);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Compile-time Error! Type mismatch so these cannot be compared:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// println!(&quot;_struct1 == _struct2 yields: {}&quot;,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//           _struct1 == _struct2);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以通过使用幻像类型参数实现 Add 来检查有用的单位转换方法。下面检查 Add trait ：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#8C8C8C;font-style:italic">// This construction would impose: `Self + RHS = Output`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// where RHS defaults to Self if not specified in the implementation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">pub</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">trait</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Add</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token constant" style="color:#1750EB">RHS</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">Self</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Output</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rhs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#1750EB">RHS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">Self</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#008080">Output</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `Output` must be `T&lt;U&gt;` so that `T&lt;U&gt; + T&lt;U&gt; = T&lt;U&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Add</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Output</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">T</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">U</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>整个实现</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#0033B3">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">std</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">ops</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token class-name" style="color:#008080">Add</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">std</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">marker</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">/// Create void enumerations to define unit types.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#0550AE">#[derive(Debug, Clone, Copy)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">enum</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Inch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#0550AE">#[derive(Debug, Clone, Copy)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">enum</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Mm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">/// `Length` is a type with phantom type parameter `Unit`,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">/// and is not generic over the length type (that is `f64`).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">/// `f64` already implements the `Clone` and `Copy` traits.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#0550AE">#[derive(Debug, Clone, Copy)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Length</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Unit</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">f64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Unit</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#8C8C8C;font-style:italic">/// The `Add` trait defines the behavior of the `+` operator.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">impl</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Unit</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Add</span><span class="token plain"> </span><span class="token keyword" style="color:#0033B3">for</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Length</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Unit</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">type</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:#008080">Output</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Length</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Unit</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// add() returns a new `Length` struct containing the sum.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rhs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Length</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Unit</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Length</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Unit</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `+` calls the `Add` implementation for `f64`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name" style="color:#008080">Length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#0033B3">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#1750EB">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> rhs</span><span class="token number" style="color:#1750EB">.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#0033B3">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#00627A">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Specifies `one_foot` to have phantom type parameter `Inch`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> one_foot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token class-name" style="color:#008080">Length</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Inch</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#1750EB">12.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `one_meter` has phantom type parameter `Mm`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> one_meter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Length</span><span class="token operator" style="color:rgb(216, 60, 8)">&lt;</span><span class="token class-name" style="color:#008080">Mm</span><span class="token operator" style="color:rgb(216, 60, 8)">&gt;</span><span class="token plain">   </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">Length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#1750EB">1000.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name" style="color:#008080">PhantomData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `+` calls the `add()` method we implemented for `Length&lt;Unit&gt;`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Since `Length` implements `Copy`, `add()` does not consume</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// `one_foot` and `one_meter` but copies them into `self` and `rhs`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> two_feet </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> one_foot </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> one_foot</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#0033B3">let</span><span class="token plain"> two_meters </span><span class="token operator" style="color:rgb(216, 60, 8)">=</span><span class="token plain"> one_meter </span><span class="token operator" style="color:rgb(216, 60, 8)">+</span><span class="token plain"> one_meter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Addition works.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;one foot + one_foot = {:?} in&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> two_feet</span><span class="token number" style="color:#1750EB">.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#1750EB">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#067D17">&quot;one meter + one_meter = {:?} mm&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> two_meters</span><span class="token number" style="color:#1750EB">.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Nonsensical operations fail as they should:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">// Compile-time Error: type mismatch.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#8C8C8C;font-style:italic">//let one_feter = one_foot + one_meter;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wangenius/wangenius.github.io/tree/master/docs/lang/rust/数据类型/泛型.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/lang/rust/数据类型/复合类型"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">复合类型</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/lang/rust/数据类型/自定义类型"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">自定义类型</div></a></nav></div><div>Loading Comments...</div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#函数" class="table-of-contents__link toc-highlight">函数</a></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">implementation</a></li><li><a href="#trait" class="table-of-contents__link toc-highlight">trait</a></li><li><a href="#bounds" class="table-of-contents__link toc-highlight">bounds</a></li><li><a href="#multibounds" class="table-of-contents__link toc-highlight">MultiBounds</a></li><li><a href="#where子句" class="table-of-contents__link toc-highlight">where子句</a></li><li><a href="#new-type-idiom" class="table-of-contents__link toc-highlight">New type idiom</a></li><li><a href="#associated-items" class="table-of-contents__link toc-highlight">Associated items</a><ul><li><a href="#关联类型" class="table-of-contents__link toc-highlight">关联类型</a></li></ul></li><li><a href="#幻想类型 参数" class="table-of-contents__link toc-highlight">幻想类型参数</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">知识库</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/about/致明日的舞">致明日的舞</a></li><li class="footer__item"><a class="footer__link-item" href="/en/docs/cs/os/概述">操作系统基础</a></li><li class="footer__item"><a class="footer__link-item" href="/en/docs/dsa/ds/概述">数据结构</a></li><li class="footer__item"><a class="footer__link-item" href="/en/docs/lang/rust/概述">Rust</a></li><li class="footer__item"><a class="footer__link-item" href="/en/docs/cs/db/概述">数据库</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weibo.com/u/6320492937" target="_blank" rel="noopener noreferrer" class="footer__link-item">微博<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://space.bilibili.com/247967944" target="_blank" rel="noopener noreferrer" class="footer__link-item">bilibili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.zhihu.com/people/wangenius" target="_blank" rel="noopener noreferrer" class="footer__link-item">知乎<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/wangenius" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/about/关于我">关于我</a></li><li class="footer__item"><a class="footer__link-item" href="/en/blog">博客</a></li><li class="footer__item"><a href="https://github.com/wangenius/wangenius.github.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">讨论<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/wangenius/wangenius.github.io/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 吕麓弥章, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>